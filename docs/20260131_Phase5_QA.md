# Seren Browser Phase 5 QA & Security Review (January 31, 2026)

## Verdict
Phase 5 has not been started. Every OpenClaw feature in the SPA still calls Tauri-era runtime commands that do not exist in the Node.js daemon, so the UI cannot launch, monitor, or message OpenClaw at all. Releasing this phase would ship hard-coded buttons that fail immediately.

## Functional Findings
1. **No runtime implementation for any OpenClaw RPC** *(Blocker)* – The browser invokes `openclaw_start`, `openclaw_stop`, `openclaw_list_channels`, `openclaw_send`, etc. (`src/stores/openclaw.store.ts:210-366`, `src/services/openclaw-agent.ts:196-334`, `src/lib/tools/executor.ts:110-296`), but the Node runtime never registers such handlers. Searching `runtime/src` shows only filesystem and chat handlers; there is zero reference to “openclaw”. Every API call therefore rejects with “Method not found”, preventing the process from ever starting.
2. **Event wiring is missing end to end** *(Blocker)* – The SPA listens for events like `openclaw://status-changed` and `openclaw://approval-needed` (`src/stores/openclaw.store.ts:72-118`, `src/components/settings/OpenClawApproval.tsx:34-66`, `src/lib/tools/executor.ts:64-74`), but the runtime never emits those events. Without the server-side event bus promised in Phase 2, the UI can neither reflect process status nor deliver trust approvals.
3. **Setup wizard and channel connect flows hard-depend on runtime RPCs** *(Blocker)* – The OpenClaw wizard (`src/components/settings/OpenClawWizard.tsx:244-313`) and settings panel (`src/components/settings/OpenClawSettings.tsx:20-236`) call `openclawStore.start/stop/refreshChannels`, which in turn call `runtimeInvoke` for the missing RPCs. Users cannot complete setup, connect a channel, or send a message.
4. **OpenClaw tools in the chat UI are dead** – OpenClaw-specific tools are still exposed (`src/lib/tools/definitions.ts:68-384`), but when the executor sees a tool with the `openclaw__` prefix it calls `runtimeInvoke("openclaw_send", ...)` (`src/lib/tools/executor.ts:110-296`). With no backend implementation, every OpenClaw tool call fails instantly.

## Security & UX Concerns
- Because none of the runtime commands exist, the SPA spams `runtimeInvoke` errors in the console but offers no guidance to the user. There is no gating or fallback state, so users will believe OpenClaw is available when it is not.
- The missing server-side process management also means there is no enforcement of trust levels or message approval, leaving a future implementation to retroactively bolt on security without any test coverage.

## Required Work Before Sign-off
1. **Implement OpenClaw process management in the Node runtime** – Add handlers for start/stop/restart/status/list channels/connect/disconnect/send and wire them up to the actual OpenClaw binary/process. Register them inside `runtime/src/handlers/index.ts` and cover them with Vitest + integration tests.
2. **Add runtime event broadcasting** – Emit `openclaw://status-changed`, `openclaw://channel-event`, and approval events via the WebSocket event bus so the SPA store receives real-time updates.
3. **Provide UX gating / error states** – Until the runtime confirms OpenClaw is running, disable the OpenClaw settings sections and tool definitions, and show actionable instructions.
4. **Create automated tests** – At minimum, add runtime unit tests that simulate channel connect/disconnect, and UI tests that verify the store reacts correctly to the emitted events.

Without these deliverables, Phase 5 cannot be considered ready for production.
